# 0001. Genome identifiers

Date: 2019-06-11

## Status

Agreed

## Context


Many functions of the website require the context of a specific genome assembly. Currently in Ensembl we do not have a single identifier that can uniquely resolve each of our assemblies.

The existing fields that come closest to doing this are:

- **assembly_name** -  identifies an assembly for a given species, but is not unique outside of that species - many species use the same assembly name (e.g. “v1”)
- **assembly_accesion** - while the INSDC assembly accession is uniquely identifying, not all assemblies in Ensembl have one  
- **production_name** - in the context of specific Ensembl release this identifies a species and assembly, but is not unique across releases

We propose creating a new identifier to uniquely identify genome assemblies within Ensembl. This is intended to be system-level identifier and not an identifier for public distribution.

## Decision

We will generate genome IDs for each assembly we want to display in the website. The IDs will be generated by combining two existing data fields to produce a unique string. While this composition will offer a degree of human readability it is not designed to be decomposed back into separate fields. The IDs will be generated by the back-end APIs and the web client (or other consumers) should not assume any knowledge of the ID format.  
  
There may be exceptional cases where IDs are assigned manually and do not follow the format described here - this reinforces the need for clients and consumers to make no assumptions.

Once a genome ID has been assigned and released into production it cannot be changed.

**Genome ID format**

`<production_name>_(<assembly_name> OR <assembly_accession>)`

Generally assemblies have names that we can use here, but in cases where there is no suitable name, assembly_accession will be used instead. Where assembly name is used, the patch build notation will be removed to avoid the need to update the IDs when new patch builds are made, e.g. `GRCh38.p12` becomes `GRCh38`.

To ensure the IDs are convenient to use in URLs, filenames, hash keys, etc, sanitisation will be applied to replace all non-alphanumeric character sequences with underscores, e.g. by applying a regular expression such as `s/[^a-zA-Z0-9]+/_/g`

## Consequences

While it is convenient to have a human readable genome ID format, a potential risk is that external users will make assumptions about how these IDs are composed. This may lead to attempts to parse out the species and assembly components from an ID, or attempts to compose an ID from the species and assembly components - the results of which may well be invalid.

At present, we feel the convenience of a human-readable format outweighs the potential risks.

By sanitising the ID (replacing non-alpha-numeric chars with underscores) we introduce the chance of a clash, e.g. given two strings `some_species_A-B` and `some_species_A+B`, the sanitised version is the same: `some_species_A_B`. The likelihood is low, but if a clash does occur a suitable ID will be generated manually.
